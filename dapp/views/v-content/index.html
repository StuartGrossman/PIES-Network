<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>PIES - V-Content</title>
  <link rel="stylesheet" type="text/css" href="../sources/css/bootstrap.min.css">
    <link href="../sources/css/sidebar-nav.min.css" rel="stylesheet">
    <link href="../sources/css/jquery.toast.css" rel="stylesheet">
    <link href="../sources/css/morris.css" rel="stylesheet">
    <link href="../sources/css/animate.css" rel="stylesheet">
    <link href="../sources/css/viewer.css" id="theme" rel="stylesheet">
    <link href="../sources/css/default.css" id="theme" rel="stylesheet">
    <link href="../sources/css/spinners.css" />
    <link href="../sources/css/custom.css" rel="stylesheet" />
    <link rel="stylesheet" href="../sources/css/dropify.min.css">
    <link rel="stylesheet" href="../sources/css/plyr.css">
    <link href="../sources/css/bootstrap-tagsinput.css" rel="stylesheet" />


    <!-- <link href="../sources/css/bootstrap-tagsinput.css" rel="stylesheet" />
    <link href="../sources/css/owl.carousel.min.css" rel="stylesheet" type="text/css" />
    <link href="../sources/css/owl.theme.default.css" rel="stylesheet" type="text/css" /> -->
    <!-- animation CSS -->
    <!-- <link rel="stylesheet" href="../sources/css/bootstrap-select.min.css"> -->
</head>

<body>

<div id="wrapper" class="main-container" id="main-container" style="display: none;">
    <!-- Navigation -->

    <nav class="navbar navbar-default navbar-static-top m-b-0">
        <div class="navbar-header"> <a class="navbar-toggle hidden-sm hidden-md hidden-lg " href="javascript:void(0)" data-toggle="collapse" data-target=".navbar-collapse"><i class="ti-menu"></i></a>
            <ul class="nav navbar-top-links navbar-left hidden-xs">
                <li><a href="javascript:void(0)" class="open-close hidden-xs waves-effect waves-light"><i class="icon-arrow-left-circle ti-menu"></i></a></li>
                <li>
                    <!-- <form role="search" class="app-search hidden-xs"> -->
                        <!-- <input type="text" placeholder="Search..." class="form-control"> <a href=""><i class="fa fa-search"></i></a> </form> -->
                        <!-- <li><a href="gallery.html" class="waves-effect"><i class="fa fa-circle-o text-info"></i> <span class="hide-menu" id="balance"></span></a></li> -->

                </li>
            </ul>
            <ul class="nav navbar-top-links navbar-right pull-right">
              <li><a href="/a-transactions" class="waves-effect"><i class="fa fa-circle-o text-info"></i>
                <span class="hide-menu" id="balance"><i>0</i></span>
                <div class="notify"><span class="heartbit">
                  </span><span class="point"></span>
                </div></a>
              </li>

            </ul>
        </div>
    </nav>

    <!-- Left navbar-header -->
    <div class="navbar-default sidebar" role="navigation">
        <div class="sidebar-nav navbar-collapse slimscrollsidebar">
            <div class="user-profile">
                <div class="dropdown user-pro-body">

                  <div>
                    <img id="userImage" alt="user-img" class="img-circle"></div>
                    <!-- <a href="#" class="dropdown-toggle u-dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" id="userName"><span class="caret"></span></a> -->
                    <ul class="dropdown-menu animated flipInY">
                        <li><a href="#"><i class="ti-user"></i> My Profile</a></li>
                        <li><a href="#"><i class="ti-wallet"></i> My Balance</a></li>
                        <li><a href="#"><i class="ti-email"></i> Inbox</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#"><i class="ti-settings"></i> Account Setting</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="login.html"><i class="fa fa-power-off"></i> Logout</a></li>
                    </ul>
                </div>
            </div>
            <ul class="nav" id="side-menu">
                <li class="sidebar-search hidden-sm hidden-md hidden-lg">
                    <!-- input-group -->
                    <div class="input-group custom-search-form">
                        <input type="text" class="form-control" placeholder="Search..."> <span class="input-group-btn">
        <button class="btn btn-default" type="button"> <i class="fa fa-search"></i> </button>
        </span> </div>
                    <!-- /input-group -->
                </li>
                <!-- <li class="nav-small-cap m-t-10"> Main Menu</li> -->
                <li> <a href="index.html" class="waves-effect active"><i class="linea-icon linea-basic fa-fw" data-icon="v"></i> <span class="hide-menu"> Dashboard <span class="fa arrow"></span> <span class="label label-rouded label-custom pull-right" id="alerts">4</span></span></a>
                    <ul class="nav nav-second-level">
                        <!-- <li> <a href="index.html">Minimalistic</a> </li>
                        <!-- <li> <a href="index2.html">Demographical</a> </li> -->
                        <!-- <li> <a href="/a-upload"></a> </li> -->
                        <li> <a href="/content">My Content</a> </li>
                    </ul>
                </li>
                <li><a href="/v-wallet" class="waves-effect"><i class="icon-wallet fa-fw"></i> <span class="hide-menu">Wallet</span></a></li>


                <li> <a href="/v-settings" class="waves-effect"><i data-icon="P" class="linea-icon linea-basic fa-fw"></i> <span class="hide-menu">Settings</span></a> </li>
                <!-- <li> <a href="#" class="waves-effect"><i data-icon="7" class="linea-icon linea-basic fa-fw"></i> <span class="hide-menu">Icons<span class="fa arrow"></span></span></a> -->
                    <ul class="nav nav-second-level">
                        <!-- <li> <a href="fontawesome.html">Font awesome</a> </li>
                        <li> <a href="themifyicon.html">Themify Icons</a> </li>
                        <li> <a href="simple-line.html">Simple line Icons</a> </li>
                        <li><a href="linea-icon.html">Linea Icons</a></li>
                        <li><a href="weather.html">Weather Icons</a></li> -->
                    </ul>
                </li>

                <li><a href="login.html" class="waves-effect"><i class="icon-logout fa-fw"></i> <span class="hide-menu">Logout</span></a></li>
                <!-- <li class="nav-small-cap"> Support</li> -->
                <!-- <li><a href="documentation.html" class="waves-effect"><i class="fa fa-circle-o text-danger"></i> <span class="hide-menu">Documentation</span></a></li> -->
                <!-- <li><a href="faq.html" class="waves-effect"><i class="fa fa-circle-o text-success"></i> <span class="hide-menu">Faqs</span></a></li> -->
            </ul>
        </div>
    </div>
    <!-- Left navbar-header end -->

    <!-- Page Content -->
    <div id="page-wrapper">

        <div class="container-fluid">

            <div class="row bg-title">
                <div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
                    <ol class="breadcrumb">
                        <li><a href="#">Dashboard</a></li>
                        <li class="active">Content</li>
                    </ol>
                </div>
                <!-- /.col-lg-12 -->
            </div>


             <div class="modal fade" id="Modal1" tabindex="-1" role="dialog" aria-labelledby="ModalLabel1">
                 <div class="modal-dialog" role="document">
                     <div class="modal-content">
                         <div class="modal-header">
                             <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button> -->
                             <!-- <div class="row">
                               <div class="col-md-4">

                               </div>
                             </div> -->
                             <h4 class="modal-title" id="ModalLabel1">Beach Vacation
                               <span style="font-size: 15px; margin-left: 15%;">Payout - 3.5 (PCS)
                                <button id="playButton" class="btn btn-primary btn-sm" style="margin-left: 15%;" onclick="play()">Play</button>

                               </span>
                             </h4>
                             <div class="modal-title" id="doneButton" style=" display:none">
                               <button class="btn btn-info btn"  onclick="done()">Done</button><span style="font-size:15px; color: red; opacity: .5;">    Press once you have watched the contnet</span>

                             </div>

                         </div>
                         <div class="modal-body">
                           <img id="capta" class="card-img-top img-responsive" src="" alt="Card image cap" style="background-color: white; margin-top: 7px;">
                           <video id="videoCage" style="display: none;" width="100%" height="340" controls>
                              <source src="" type="video/mp4">
                           </video>
                         </div>

                     </div>
                 </div>
             </div>
             <div class="modal fade" id="Modal1" tabindex="-1" role="dialog" aria-labelledby="ModalLabel1">
                 <div class="modal-dialog" role="document">
                     <div class="modal-content">
                         <div class="modal-header">
                             <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button> -->
                             <!-- <div class="row">
                               <div class="col-md-4">

                               </div>
                             </div> -->
                             <h4 class="modal-title" id="ModalLabel1">Beach Vacation
                               <span style="font-size: 15px; margin-left: 15%;">Payout - 3.5 (PCS)
                                <button id="playButton" class="btn btn-primary btn-sm" style="margin-left: 15%;" onclick="play()">Play</button>

                               </span>
                             </h4>
                             <div class="modal-title" id="doneButton" style=" display:none">
                               <button class="btn btn-info btn"  onclick="done()">Done</button><span style="font-size:15px; color: red; opacity: .5;">    Press once you have watched the contnet</span>

                             </div>

                         </div>
                         <div class="modal-body">
                           <img id="capta" class="card-img-top img-responsive" src="" alt="Card image cap" style="background-color: white; margin-top: 7px;">
                           <video id="videoCage" style="display: none;" width="100%" height="340" controls>
                              <source src="" type="video/mp4">
                           </video>
                         </div>

                     </div>
                 </div>
             </div>
               <div class="row">
                 <div class="col-md-4 col-lg-4 col-sm-12 col-xs-12">
                     <div class="card hvr-grow" style="background-color: white;" id="content">
                         <img id="content1" class="card-img-top img-responsive" src="" alt="Card image cap" style="background-color: white; margin-top: 7px; width: 90%; margin-left: 15px;">
                         <div class="card-block" style="padding-left: 5px;">
                           <div class="row">
                             <div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">
                               <div id="tags-holder" class="bootstrap-tagsinput">

                               </div>

                             </div>

                           </div>

                             <p class="card-text"></p>
                             <!-- <a href="#" class="btn btn-primary" style="margin-bottom: 10px;">View</a> -->
                         </div>
                     </div>
                 </div>
                 <!-- <div class="col-md-4 col-lg-4 col-sm-12 col-xs-12">
                     <div class="card hvr-grow" style="background-color: white;" id="content">
                         <img class="card-img-top img-responsive" src="../sources/foundry/img/phot1.jpg" alt="Card image cap" style="background-color: white; margin-top: 7px;">
                         <div class="card-block" style="padding-left: 5px;">
                             <h4 class="card-title">Card title</h4>
                             <p class="card-text"></p>
                         </div>
                     </div>
                 </div>
                 <div class="col-md-4 col-lg-4 col-sm-12 col-xs-12">
                     <div class="card hvr-grow" style="background-color: white;" id="content">
                         <img class="card-img-top img-responsive" src="../sources/foundry/img/phot1.jpg" alt="Card image cap" style="background-color: white; margin-top: 7px;">
                         <div class="card-block" style="padding-left: 5px;">
                             <h4 class="card-title">Card title</h4>
                             <p class="card-text"></p>
                         </div>
                     </div>
                 </div> -->
               </div>

        </div>

    </div>


</div>





<!-- loader -->
<div>
  <section id="loaderSection" class="loaderSection" style="background: white">
      <div id="loader" class="loader" >
        <div class="box"></div>
        <div class="hill"></div>
      </div>
  </section>
</div>

</body>


<script src="https://www.gstatic.com/firebasejs/4.1.3/firebase.js"></script>
<script src="../sources/js/jquery.min.js"></script>
<script src="../sources/js/tether.min.js"></script>
<script src="../sources/js/bootstrap.min.js"></script>
<script src="../sources/js/sidebar-nav.min.js"></script>
<script src="../sources/js/jquery.slimscroll.js"></script>
<script src="../sources/js/waves.js"></script>
<script src="../sources/js/jquery.waypoints.min.js"></script>
<script src="../sources/js/jquery.counterup.min.js"></script>
<script src="../sources/js/raphael-min.js"></script>
<script src="../sources/js/bootstrap-tagsinput.min.js"></script>
<script src="../sources/js/custom.min.js"></script>
<script src="../sources/js/jquery.sparkline.min.js"></script>
<script src="../sources/js/dashboard1.js"></script>
<script src="../sources/js/jquery.charts-sparkline.js"></script>
<script src="../sources/js/jquery.toast.js"></script>
<script src="../sources/js/jQuery.style.switcher.js"></script>
<script src="../sources/js/dropify.min.js"></script>
<script src="../sources/js/bootstrap-select.min.js"></script>
<script src="../sources/js/switchery.min.js"></script>
<script src="../sources/js/ethjs-query.min.js"></script>
<script src="../sources/js/ethjs-contract.min.js"></script>
<script src="../sources/js/owl.carousel.min.js"></script>
<script src="../sources/js/owl.custom.js"></script>
<script src="../sources/js/plyr.js"></script>


<!-- <script src="../sources/js/upload/upload.js"></script> -->



<script type="text/javascript">
  $(document).ready(function() {
  // console.log("js script online")
  var loadTime = Math.floor((Math.random() * 5000) + 500);

  console.log(loadTime)
  //////loader
  // $('.main-container').css("display", "none");
  // $('#successMessage').hide();
  setTimeout(function(){
    $('.loader').hide();
    $('.loaderSection').hide();



    $('.main-container').css("display", "initial")
  }, loadTime);
    $.toast({
        heading: 'Welcome to Pies',
        text: 'Loading your pecies now!',
        position: 'top-right',
        loaderBg: '#ff6849',
        icon: 'info',
        hideAfter: loadTime,
        stack: 6
    })
  });

  var loaderShow = function(){
    $('.main-container').css("display", "none")

    $('.loader').show();
    $('.loaderSection').show();

  }
  var loaderHide = function(){
    $('.loader').hide();
    $('.loaderSection').hide();
    $('.main-container').show();

  }

  $('#content').on('click', function(e){
    $('#Modal1').modal();
  });

</script>


<script>
var config = {
  apiKey: "AIzaSyBNyW7vjQSK2Gbrh4Mzox6G-uAG4gK1rgE",
  authDomain: "adspace-9fe5c.firebaseapp.com",
  databaseURL: "https://adspace-9fe5c.firebaseio.com",
  projectId: "adspace-9fe5c",
  storageBucket: "",
  messagingSenderId: "129227170241"
};

firebase.initializeApp(config);
var ref = firebase.database().ref('queue/tasks');

firebase.auth().onAuthStateChanged(function(user) {
  if(user){
    userObject = user;
    // checkState(userObject);
    // Onload()
    // asyncWait();
    // console.log(user)
    document.getElementById('userImage').src = user.photoURL;
    // document.getElementById('userName').innerHTML = user.displayName;
    setTimeout(function(){
      loadContent();

    },1000)
    // writeUserData(u)

  }else{
    window.location = '/';

  }
})

// function openContent(){
//
// }
var contentData;
function loadContent(){
  console.log(userObject.uid)
  firebase.database().ref('publishedContent/' + userObject.uid).once('value', function(snapshot){
    console.log(snapshot.val())
    if(snapshot.val()){
      snapshot.forEach(function(res){
        console.log(res.val())
        //generate HTML function
        console.log(res.val().capta)
        contentData = res.val();
        console.log(res.val().capta)
        document.getElementById('capta').setAttribute('src', res.val().capta)
        document.getElementById('content1').setAttribute('src', res.val().capta)
        for(var k = 0; k < res.val().tags.length; k++){
          console.log()
          var tagsName = res.val().tags[k];
          var para = document.createElement("span");
          para.className += 'tag label label-info'
          var node = document.createTextNode('#' + res.val().tags[k]);

          para.appendChild(node);
          document.getElementById('tags-holder').appendChild(para)

        }


      })
    }
  })
}

function play(){
  document.getElementById('videoCage').setAttribute('src', contentData.url);
  // document.getElementById('ModalLabel1').style.display = 'none';
  plyr.setup();

  document.getElementById('capta').style.display = 'none';
  document.getElementById('ModalLabel1').style.display = 'none';
  document.getElementById('doneButton').style.display = 'block';


  document.getElementById('videoCage').style.display = 'block';


}
</script>

</html>
